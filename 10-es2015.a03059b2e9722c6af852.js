(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{lCCV:function(t,o,e){"use strict";e.r(o),e.d(o,"TodoPageModule",(function(){return g}));var n=e("ofXK"),i=e("3Pt+"),s=e("TEn/"),a=e("tyNb"),d=e("mrSG"),l=e("LRne"),c=e("fXoL"),b=e("XNiG");class r{constructor(){this.todoList=[]}addTodo(t){this.todoList.push(t)}deleteTodo(t){this.todoList.splice(t,1)}updateTodo(t,o){this.todoList[t]=o}}var u=e("lJxs");let h=(()=>{class t{constructor(){this.todo=new r,this.todoSubject=new b.a,this.todoState=this.todoSubject.asObservable().pipe(Object(u.a)(t=>t.todoList)),this.todoSubject.subscribe(t=>{console.log(t),localStorage.setItem("todo",JSON.stringify(t))})}addTodo(t){this.todo.addTodo(t),this.todoSubject.next(this.todo)}deleteTodo(t){this.todo.deleteTodo(t),this.todoSubject.next(this.todo)}updateTodo(t,o){this.todo.updateTodo(t,o),this.todoSubject.next(this.todo)}loadBackup(){const t=JSON.parse(localStorage.getItem("todo"));return t&&(this.todo.todoList=[...t.todoList],this.todoSubject.next(this.todo)),this.todo.todoList}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=c.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function p(t,o){if(1&t&&(c.Kb(0,"ion-label",14),c.hc(1),c.Vb(2,"date"),c.Ib(3,"br"),c.hc(4),c.Jb()),2&t){const t=c.Ub().$implicit;c.xb(1),c.jc(" ",c.Xb(2,2,null==t?null:t.create_at,"yyyy\u5e74MM\u6708dd\u65e5"),""),c.xb(3),c.jc(" ",null==t?null:t.label," ")}}function f(t,o){1&t&&(c.Kb(0,"ion-label",14),c.hc(1,"\u4e88\u5b9a\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044"),c.Jb())}function m(t,o){if(1&t){const t=c.Lb();c.Kb(0,"ion-item-sliding"),c.Kb(1,"ion-item-options",6),c.Kb(2,"ion-item-option",7),c.Kb(3,"ion-button",8),c.Sb("click",(function(){c.dc(t);const e=o.index;return c.Ub().deleteToDo(e)})),c.Ib(4,"ion-icon",9),c.hc(5," \u524a\u9664 "),c.Jb(),c.Jb(),c.Jb(),c.Kb(6,"ion-item",10),c.Sb("click",(function(){c.dc(t);const e=o.index,n=o.$implicit;return c.Ub().updateToDo(e,n)})),c.gc(7,p,5,5,"ion-label",11),c.gc(8,f,2,0,"ion-label",11),c.Jb(),c.Kb(9,"ion-item-options",12),c.Kb(10,"ion-item-option"),c.Kb(11,"ion-button",8),c.Sb("click",(function(){c.dc(t);const e=o.index,n=o.$implicit;return c.Ub().updateToDo(e,n)})),c.Ib(12,"ion-icon",13),c.hc(13," \u7de8\u96c6 "),c.Jb(),c.Jb(),c.Jb(),c.Jb()}if(2&t){const t=o.$implicit,e=c.Ub();c.xb(3),c.ac("disabled",e.disableButton),c.xb(4),c.ac("ngIf",null==t?null:t.label),c.xb(1),c.ac("ngIf",!(null!=t&&t.label)),c.xb(3),c.ac("disabled",e.disableButton)}}const T=[{path:"",component:(()=>{class t{constructor(t,o){this.todo=t,this.alertController=o,this.todoState=this.todo.todoState,this.disableButton=!1}ngOnInit(){this.todoState=Object(l.a)(this.todo.loadBackup())}onDisableButton(t){this.disableButton=!this.disableButton,this.disableButton=!1}addToDo(){this.todo.addTodo({label:""})}deleteToDo(t){this.onDisableButton({}),this.todo.deleteTodo(t)}updateToDo(t,o){return Object(d.a)(this,void 0,void 0,(function*(){this.onDisableButton({});const e=yield this.presentAlertPrompt(o);e&&this.todo.updateTodo(t,{create_at:e.ToDoDate,label:e.ToDoLabel,content:e.ToDoContent})}))}presentAlertPrompt(t){var o;return Object(d.a)(this,void 0,void 0,(function*(){const e=yield this.alertController.create({header:"\u4e88\u5b9a\u78ba\u8a8d",inputs:[{name:"ToDoDate",type:"date",value:t.create_at?t.create_at:""},{name:"ToDoLabel",type:"text",value:t.label?t.label:"",placeholder:"\u4e88\u5b9a\u306e\u540d\u524d\u3092\u5165\u529b"},{name:"ToDoContent",type:"text",value:t.content?t.content:"",placeholder:"\u4e88\u5b9a\u306e\u8a73\u7d30\u3092\u5165\u529b"}],buttons:[{text:"\u30ad\u30e3\u30f3\u30bb\u30eb",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"\u66f4\u65b0",handler:()=>{}}]});yield e.present();const n=yield e.onDidDismiss();return"cancel"===n.role||null===(o=n.data)||void 0===o?void 0:o.values}))}}return t.\u0275fac=function(o){return new(o||t)(c.Hb(h),c.Hb(s.a))},t.\u0275cmp=c.Bb({type:t,selectors:[["app-todo"]],decls:14,vars:4,consts:[[3,"translucent"],["slot","start"],[1,"ion-padding"],[4,"ngFor","ngForOf"],["expand","full",1,"ion-margin",3,"click"],["slot","start","name","add"],["side","start"],["color","danger"],["fill","clear","color","light","expand","full",3,"disabled","click"],["slot","start","name","trash"],["button","true",3,"click"],["class","ion-text-wrap",4,"ngIf"],["side","end"],["slot","start","name","create"],[1,"ion-text-wrap"]],template:function(t,o){1&t&&(c.Kb(0,"ion-header",0),c.Kb(1,"ion-toolbar"),c.Kb(2,"ion-buttons",1),c.Ib(3,"ion-menu-button"),c.Jb(),c.Kb(4,"ion-title"),c.hc(5,"ToDo"),c.Jb(),c.Jb(),c.Jb(),c.Kb(6,"ion-content",2),c.Kb(7,"ion-card"),c.Kb(8,"ion-list"),c.gc(9,m,14,4,"ion-item-sliding",3),c.Vb(10,"async"),c.Jb(),c.Kb(11,"ion-button",4),c.Sb("click",(function(){return o.addToDo()})),c.Ib(12,"ion-icon",5),c.hc(13," \u4e88\u5b9a\u8ffd\u52a0 "),c.Jb(),c.Jb(),c.Jb()),2&t&&(c.ac("translucent",!0),c.xb(9),c.ac("ngForOf",c.Wb(10,2,o.todoState)))},directives:[s.g,s.w,s.d,s.q,s.v,s.f,s.e,s.n,n.j,s.c,s.h,s.l,s.k,s.j,s.i,n.k,s.m],pipes:[n.b,n.e],styles:[""]}),t})()}];let x=(()=>{class t{}return t.\u0275mod=c.Fb({type:t}),t.\u0275inj=c.Eb({factory:function(o){return new(o||t)},imports:[[a.i.forChild(T)],a.i]}),t})(),g=(()=>{class t{}return t.\u0275mod=c.Fb({type:t}),t.\u0275inj=c.Eb({factory:function(o){return new(o||t)},imports:[[n.c,i.a,s.x,x]]}),t})()}}]);